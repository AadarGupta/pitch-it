{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlay,faPause}from'@fortawesome/free-solid-svg-icons';import'@fortawesome/fontawesome-svg-core/styles.css';import'./audioPlayer.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudioPlayer=_ref=>{let{src}=_ref;const[isPlaying,setIsPlaying]=useState(false);const[duration,setDuration]=useState(0);const[currentTime,setCurrentTime]=useState(0);const audioRef=useRef();const progressBarRef=useRef();const animationRef=useRef();useEffect(()=>{const audio=audioRef.current;const setAudioData=()=>{setDuration(audio.duration);setCurrentTime(audio.currentTime);};const setAudioTime=()=>setCurrentTime(audio.currentTime);audio.addEventListener('loadeddata',setAudioData);audio.addEventListener('timeupdate',setAudioTime);return()=>{audio.removeEventListener('loadeddata',setAudioData);audio.removeEventListener('timeupdate',setAudioTime);};},[]);useEffect(()=>{if(isPlaying){audioRef.current.play();animationRef.current=requestAnimationFrame(whilePlaying);}else if(!isPlaying&&audioRef.current){audioRef.current.pause();cancelAnimationFrame(animationRef.current);}},[isPlaying]);const whilePlaying=()=>{progressBarRef.current.value=audioRef.current.currentTime;changePlayerCurrentTime();animationRef.current=requestAnimationFrame(whilePlaying);};const changeRange=()=>{audioRef.current.currentTime=progressBarRef.current.value;changePlayerCurrentTime();};const changePlayerCurrentTime=()=>{progressBarRef.current.style.setProperty('--seek-before-width',\"\".concat(progressBarRef.current.value/duration*100,\"%\"));setCurrentTime(progressBarRef.current.value);};const togglePlayPause=()=>{setIsPlaying(!isPlaying);};return/*#__PURE__*/_jsxs(\"div\",{className:\"audio-player\",children:[/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:src,preload:\"metadata\"}),/*#__PURE__*/_jsx(\"button\",{onClick:togglePlayPause,className:\"play-pause\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:isPlaying?faPause:faPlay})}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"range\",className:\"progress-bar\",defaultValue:\"0\",ref:progressBarRef,onChange:changeRange})}),/*#__PURE__*/_jsxs(\"div\",{className:\"time\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"current-time\",children:currentTime.toFixed(2)}),/*#__PURE__*/_jsx(\"div\",{className:\"duration\",children:duration.toFixed(2)})]})]});};export default AudioPlayer;","map":{"version":3,"names":["React","useState","useEffect","useRef","FontAwesomeIcon","faPlay","faPause","jsx","_jsx","jsxs","_jsxs","AudioPlayer","_ref","src","isPlaying","setIsPlaying","duration","setDuration","currentTime","setCurrentTime","audioRef","progressBarRef","animationRef","audio","current","setAudioData","setAudioTime","addEventListener","removeEventListener","play","requestAnimationFrame","whilePlaying","pause","cancelAnimationFrame","value","changePlayerCurrentTime","changeRange","style","setProperty","concat","togglePlayPause","className","children","ref","preload","onClick","icon","type","defaultValue","onChange","toFixed"],"sources":["/var/www/pitch-it/client/src/components/audioPlayer.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlay, faPause } from '@fortawesome/free-solid-svg-icons';\nimport '@fortawesome/fontawesome-svg-core/styles.css';\nimport './audioPlayer.css';\n\nconst AudioPlayer = ({ src }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  \n  const audioRef = useRef();\n  const progressBarRef = useRef();\n  const animationRef = useRef();\n\n  useEffect(() => {\n    const audio = audioRef.current;\n\n    const setAudioData = () => {\n      setDuration(audio.duration);\n      setCurrentTime(audio.currentTime);\n    };\n\n    const setAudioTime = () => setCurrentTime(audio.currentTime);\n\n    audio.addEventListener('loadeddata', setAudioData);\n    audio.addEventListener('timeupdate', setAudioTime);\n\n    return () => {\n      audio.removeEventListener('loadeddata', setAudioData);\n      audio.removeEventListener('timeupdate', setAudioTime);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isPlaying) {\n      audioRef.current.play();\n      animationRef.current = requestAnimationFrame(whilePlaying);\n    } else if (!isPlaying && audioRef.current) {\n      audioRef.current.pause();\n      cancelAnimationFrame(animationRef.current);\n    }\n  }, [isPlaying]);\n\n  const whilePlaying = () => {\n    progressBarRef.current.value = audioRef.current.currentTime;\n    changePlayerCurrentTime();\n    animationRef.current = requestAnimationFrame(whilePlaying);\n  };\n\n  const changeRange = () => {\n    audioRef.current.currentTime = progressBarRef.current.value;\n    changePlayerCurrentTime();\n  };\n\n  const changePlayerCurrentTime = () => {\n    progressBarRef.current.style.setProperty('--seek-before-width', `${progressBarRef.current.value / duration * 100}%`);\n    setCurrentTime(progressBarRef.current.value);\n  };\n\n  const togglePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n\n  return (\n    <div className=\"audio-player\">\n      <audio ref={audioRef} src={src} preload=\"metadata\"></audio>\n      <button onClick={togglePlayPause} className=\"play-pause\">\n        <FontAwesomeIcon icon={isPlaying ? faPause : faPlay} />\n      </button>\n      <div className=\"progress-container\">\n        <input\n          type=\"range\"\n          className=\"progress-bar\"\n          defaultValue=\"0\"\n          ref={progressBarRef}\n          onChange={changeRange}\n        />\n      </div>\n      <div className=\"time\">\n        <div className=\"current-time\">{currentTime.toFixed(2)}</div>\n        <div className=\"duration\">{duration.toFixed(2)}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}